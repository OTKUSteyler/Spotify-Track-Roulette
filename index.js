(function(a,f,i,t){"use strict";const u=i.findByProps("sendMessage","editMessage"),l=i.findByStoreName("SpotifyStore");t.storage.trackHistory||(t.storage.trackHistory=[]);let c=null;function y(){const o=l?.getActivity();if(!o)return;const e=o.sync_id||o.session_id,r=o.details,d=o.state?.replace("by ","");if(e&&r&&d&&e!==c){c=e;const g={id:e,name:r,artist:d,url:`https://open.spotify.com/track/${e}`,timestamp:Date.now()};t.storage.trackHistory.some(function(p){return p.id===e})||(t.storage.trackHistory.push(g),t.storage.trackHistory.length>200&&t.storage.trackHistory.shift())}}function m(){return!t.storage.trackHistory||t.storage.trackHistory.length===0?"\u274C No tracks in history yet! Play some music on Spotify and try again later.":t.storage.trackHistory[Math.floor(Math.random()*t.storage.trackHistory.length)].url}let s,n;var k={onLoad:function(){n=setInterval(y,1e4),y(),s=f.registerCommand({name:"spotifyroulette",displayName:"Spotify Roulette",description:"Sends a random track from your Spotify history",options:[],execute:async function(o,e){const r=m();u.sendMessage(e.channel.id,{content:r},void 0,{nonce:Date.now().toString()})},applicationId:"-1",inputType:1,type:1})},onUnload:function(){s&&s(),n&&clearInterval(n)}};return a.default=k,Object.defineProperty(a,"__esModule",{value:!0}),a})({},vendetta.commands,vendetta.metro,vendetta.plugin);
