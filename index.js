(function(a,f,i,t){"use strict";const u=i.findByProps("sendMessage","editMessage"),m=i.findByStoreName("SpotifyStore");t.storage.trackHistory||(t.storage.trackHistory=[]);let c=null;function y(){const e=m?.getActivity();if(!e)return;const o=e.sync_id||e.session_id,r=e.details,d=e.state?.replace("by ","");if(e.assets?.large_image,o&&r&&d&&o!==c){c=o;const k={id:o,name:r,artist:d,timestamp:Date.now()};t.storage.trackHistory.some(function(h){return h.id===o})||(t.storage.trackHistory.push(k),t.storage.trackHistory.length>200&&t.storage.trackHistory.shift())}}function l(){if(!t.storage.trackHistory||t.storage.trackHistory.length===0)return"\u274C No tracks in history yet! Play some music on Spotify and try again later.";const e=t.storage.trackHistory[Math.floor(Math.random()*t.storage.trackHistory.length)];return`\u{1F3B5} **${e.name}** by ${e.artist}`}let s,n;var g={onLoad:function(){n=setInterval(y,1e4),y(),s=f.registerCommand({name:"spotifyroulette",displayName:"Spotify Roulette",description:"Sends a random track from your Spotify history",options:[],execute:async function(e,o){const r=l();u.sendMessage(o.channel.id,{content:r},void 0,{nonce:Date.now().toString()})},applicationId:"-1",inputType:1,type:1})},onUnload:function(){s&&s(),n&&clearInterval(n)}};return a.default=g,Object.defineProperty(a,"__esModule",{value:!0}),a})({},vendetta.commands,vendetta.metro,vendetta.plugin);
